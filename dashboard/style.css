/* ═══════════════════════════════════════════════════════════
   GCC ASCEND TELEMETRY TERMINAL v2.0
   CRT / Terminal Aesthetic. I cant do front end to save my life, so I asked my best friend for help :) (Yes it was claude_)
   ═══════════════════════════════════════════════════════════ */

   @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap');

   :root {
       --phosphor:        #33ff33;
       --phosphor-dim:    #1a8c1a;
       --phosphor-bright: #66ff66;
       --phosphor-glow:   rgba(51, 255, 51, 0.15);
       --amber:           #ffaa00;
       --amber-dim:       #8c6600;
       --red:             #ff3333;
       --red-dim:         #8c1a1a;
       --cyan:            #00ffcc;
       --cyan-dim:        #008866;
       --bg-deep:         #010a01;
       --bg-dark:         #020e02;
       --bg-panel:        #031203;
       --bg-panel-head:   #041a04;
       --border:          #0a3a0a;
       --border-bright:   #1a5c1a;
       --text:            #22cc22;
       --text-dim:        #147014;
       --text-bright:     #44ee44;
       --font-mono: 'IBM Plex Mono', 'Share Tech Mono', 'Consolas', 'Courier New', monospace;
       --font-display: 'Share Tech Mono', 'IBM Plex Mono', monospace;
   }
   
   * { margin: 0; padding: 0; box-sizing: border-box; }
   html, body { height: 100%; overflow: hidden; }
   
   body {
       font-family: var(--font-mono);
       background: var(--bg-deep);
       color: var(--text);
       font-size: 12px;
       line-height: 1.5;
   }
   
   .crt-overlay {
       position: fixed; top: 0; left: 0;
       width: 100%; height: 100%;
       pointer-events: none; z-index: 9999;
       background: repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(0,0,0,0.08) 1px, rgba(0,0,0,0.08) 2px);
   }
   .crt-flicker {
       position: fixed; top: 0; left: 0;
       width: 100%; height: 100%;
       pointer-events: none; z-index: 9998;
       animation: flicker 0.15s infinite; opacity: 0;
   }
   @keyframes flicker {
       0%   { opacity: 0; }
       5%   { opacity: 0.015; background: rgba(51,255,51,0.01); }
       10%  { opacity: 0; }
       97%  { opacity: 0; }
       100% { opacity: 0.01; background: rgba(51,255,51,0.005); }
   }
   
   ::-webkit-scrollbar { width: 6px; height: 6px; }
   ::-webkit-scrollbar-track { background: var(--bg-deep); }
   ::-webkit-scrollbar-thumb { background: var(--border-bright); border-radius: 0; }
   ::-webkit-scrollbar-thumb:hover { background: var(--phosphor-dim); }
   
   .main-container {
       display: grid;
       grid-template-columns: 1fr 380px;
       height: 100vh;
   }
   .content-area { overflow-y: auto; padding: 12px 16px; padding-top: 0; }
   
   header {
       background: var(--bg-deep);
       border-bottom: 1px solid var(--border);
       padding: 10px 0;
       position: sticky; top: 0; z-index: 100;
   }
   .term-prompt { font-family: var(--font-display); font-size: 13px; padding: 4px 0; white-space: nowrap; overflow: hidden; }
   .term-user { color: var(--phosphor-bright); font-weight: 600; }
   .term-colon { color: var(--text-dim); }
   .term-path { color: var(--cyan); }
   .term-dollar { color: var(--text-dim); margin: 0 2px; }
   .term-cmd { color: var(--text); }
   .cursor, .cursor-blink { color: var(--phosphor); animation: blink 1s step-end infinite; }
   @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
   
   .header-bar { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 6px; gap: 20px; }
   .ascii-logo { font-family: var(--font-display); font-size: 11px; color: var(--phosphor-dim); line-height: 1.2; white-space: pre; display: block; }
   .header-right { text-align: right; flex-shrink: 0; }
   .status-row { display: flex; align-items: center; gap: 8px; font-size: 11px; white-space: nowrap; }
   .status-dot { width: 6px; height: 6px; border-radius: 50%; display: inline-block; }
   .status-dot.live { background: var(--phosphor); box-shadow: 0 0 6px var(--phosphor); animation: pulse-dot 2s infinite; }
   @keyframes pulse-dot { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
   .status-label { color: var(--text-dim); font-size: 10px; letter-spacing: 0.5px; }
   .status-val { color: var(--phosphor-bright); font-weight: 500; }
   .sep { color: var(--border-bright); }
   
   .loading { padding: 30px 0; }
   .boot-seq { font-family: var(--font-display); font-size: 12px; color: var(--text-dim); line-height: 1.8; }
   
   .panel {
       background: var(--bg-panel);
       border: 1px solid var(--border);
       margin-bottom: 12px;
       overflow: hidden;
   }
   .panel-header {
       background: var(--bg-panel-head);
       padding: 6px 12px;
       border-bottom: 1px solid var(--border);
       font-family: var(--font-display);
       font-size: 11px;
       color: var(--phosphor-dim);
       letter-spacing: 1px;
       white-space: nowrap; overflow: hidden;
   }
   .ph-icon { color: var(--border-bright); }
   .ph-trail { color: var(--border); }
   .panel-content { padding: 12px; }
   
   .top-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
   .top-row .panel { margin-bottom: 12px; }
   #map { height: 360px; width: 100%; background: var(--bg-deep); border: 1px solid var(--border); }
   
   .hex-panel-inner {
       max-height: 420px;
       overflow-y: auto;
       padding: 12px;
   }
   
   .hex-tabs {
       display: flex;
       gap: 2px;
       margin-bottom: 10px;
       border-bottom: 1px solid var(--border);
       padding-bottom: 8px;
   }
   .hex-tab {
       background: var(--bg-deep);
       border: 1px solid var(--border);
       color: var(--text-dim);
       padding: 4px 14px;
       font-size: 10px;
       font-family: var(--font-display);
       cursor: pointer;
       letter-spacing: 1px;
       transition: all 0.15s;
   }
   .hex-tab:hover { border-color: var(--phosphor-dim); color: var(--text); }
   .hex-tab.active {
       background: var(--phosphor-dim);
       border-color: var(--phosphor-dim);
       color: var(--bg-deep);
       font-weight: 600;
   }
   
   .hex-section { margin-bottom: 10px; }
   .hex-section:last-child { margin-bottom: 0; }
   .hex-label { font-size: 9px; color: var(--text-dim); letter-spacing: 1px; margin-bottom: 4px; text-transform: uppercase; }
   .hex-meta { color: var(--cyan-dim); margin-left: 6px; }
   
   .hex-raw {
       font-family: var(--font-display); font-size: 11px;
       color: var(--cyan); background: var(--bg-deep);
       border: 1px solid var(--border); padding: 8px 10px;
       word-break: break-all; line-height: 1.6;
       max-height: 56px; overflow-y: auto;
       text-shadow: 0 0 4px rgba(0,255,204,0.3);
   }
   
   .hex-dump {
       background: var(--bg-deep); border: 1px solid var(--border);
       padding: 6px 8px; max-height: 120px; overflow-y: auto; font-size: 10px;
   }
   .hex-offset-header {
       color: var(--text-dim); font-size: 9px; letter-spacing: 0.5px;
       border-bottom: 1px solid var(--border); padding-bottom: 3px; margin-bottom: 3px;
   }
   .hex-row { display: flex; line-height: 1.6; font-family: var(--font-display); }
   .hex-row .offset { color: var(--text-dim); min-width: 52px; }
   .hex-row .bytes { color: var(--phosphor); min-width: 385px; letter-spacing: 0.5px; }
   .hex-row .ascii-col { color: var(--phosphor-dim); padding-left: 6px; border-left: 1px solid var(--border); }
   
   .byte-map {
       display: flex; flex-wrap: wrap; gap: 2px;
       padding: 6px; background: var(--bg-deep);
       border: 1px solid var(--border); margin-bottom: 6px;
   }
   .byte-cell {
       width: 20px; height: 20px;
       display: flex; align-items: center; justify-content: center;
       font-size: 8px; font-family: var(--font-display);
       border: 1px solid transparent; cursor: default;
       transition: border-color 0.15s;
   }
   .byte-cell:hover { border-color: var(--phosphor); z-index: 1; }
   .byte-cell.hdr { background: #1a3300; color: #66ff33; }
   .byte-cell.ser { background: #0a2a33; color: #33ccff; }
   .byte-cell.utc { background: #33200a; color: #ffaa33; }
   .byte-cell.gps { background: #0a1a33; color: #5588ff; }
   .byte-cell.alt { background: #2a0a33; color: #cc66ff; }
   .byte-cell.adc { background: #0a3320; color: #33ffaa; }
   .byte-cell.rsv { background: #1a1a1a; color: #555555; }
   .byte-cell.mdm { background: #330a0a; color: #ff5555; }
   
   .byte-legend { display: flex; gap: 10px; font-size: 9px; color: var(--text-dim); flex-wrap: wrap; }
   .legend-item { display: flex; align-items: center; gap: 3px; }
   .legend-color { width: 10px; height: 10px; display: inline-block; }
   .legend-color.hdr { background: #1a3300; }
   .legend-color.ser { background: #0a2a33; }
   .legend-color.utc { background: #33200a; }
   .legend-color.gps { background: #0a1a33; }
   .legend-color.alt { background: #2a0a33; }
   .legend-color.adc { background: #0a3320; }
   .legend-color.rsv { background: #1a1a1a; }
   .legend-color.mdm { background: #330a0a; }
   
   .history-nav {
       display: flex;
       align-items: center;
       gap: 6px;
       margin-bottom: 10px;
       padding: 8px;
       background: var(--bg-deep);
       border: 1px solid var(--border);
   }
   .hist-btn {
       background: var(--bg-panel);
       border: 1px solid var(--border);
       color: var(--phosphor-dim);
       font-family: var(--font-display);
       font-size: 12px;
       padding: 4px 10px;
       cursor: pointer;
       transition: all 0.15s;
       min-width: 32px;
       text-align: center;
   }
   .hist-btn:hover { border-color: var(--phosphor); color: var(--phosphor); background: var(--bg-panel-head); }
   .hist-btn:active { background: var(--phosphor-dim); color: var(--bg-deep); }
   .hist-btn:disabled { opacity: 0.3; cursor: default; }
   .hist-btn:disabled:hover { border-color: var(--border); color: var(--phosphor-dim); background: var(--bg-panel); }
   
   .hist-center { flex: 1; text-align: center; }
   .hist-momsn-row { display: flex; align-items: center; justify-content: center; gap: 6px; }
   .hist-label { font-size: 9px; color: var(--text-dim); letter-spacing: 1px; }
   .hist-momsn { font-family: var(--font-display); font-size: 18px; font-weight: 600; color: var(--cyan); text-shadow: 0 0 6px rgba(0,255,204,0.3); }
   .hist-index { font-size: 10px; color: var(--text-dim); margin-top: 2px; }
   
   .hist-meta {
       display: flex;
       gap: 16px;
       font-size: 10px;
       padding: 6px 8px;
       background: var(--bg-deep);
       border: 1px solid var(--border);
       margin-bottom: 10px;
       flex-wrap: wrap;
   }
   .hist-meta-item { display: flex; gap: 4px; }
   .hist-meta-key { color: var(--text-dim); }
   .hist-meta-val { color: var(--text-bright); font-family: var(--font-display); }
   
   .hex-diff {
       font-family: var(--font-display);
       font-size: 10px;
       background: var(--bg-deep);
       border: 1px solid var(--border);
       padding: 8px 10px;
       max-height: 80px;
       overflow-y: auto;
       line-height: 1.6;
       color: var(--text-dim);
   }
   .diff-changed { color: var(--amber); font-weight: 600; }
   .diff-same { color: var(--text-dim); opacity: 0.4; }
   .diff-summary { color: var(--phosphor-dim); font-size: 9px; margin-top: 4px; border-top: 1px solid var(--border); padding-top: 4px; }
   
   .mid-row { margin-bottom: 0; }
   .modem-grid { display: grid; grid-template-columns: auto 1fr 1fr; gap: 16px; align-items: start; }
   .modem-item { text-align: center; padding: 8px 16px; background: var(--bg-deep); border: 1px solid var(--border); min-width: 120px; }
   .modem-code {
       font-family: var(--font-display); font-size: 32px; font-weight: 700;
       color: var(--phosphor-bright);
       text-shadow: 0 0 10px var(--phosphor-glow), 0 0 20px rgba(51,255,51,0.1);
       line-height: 1.1;
   }
   .modem-code.error { color: var(--red); text-shadow: 0 0 10px rgba(255,51,51,0.3); }
   .modem-code.warn { color: var(--amber); text-shadow: 0 0 10px rgba(255,170,0,0.3); }
   .modem-code.ok { color: var(--phosphor-bright); }
   .modem-desc { font-size: 9px; color: var(--text-dim); letter-spacing: 0.5px; margin-top: 4px; text-transform: uppercase; }
   .modem-detail { font-size: 11px; }
   .md-row { display: flex; justify-content: space-between; padding: 3px 0; border-bottom: 1px dotted var(--border); }
   .md-row:last-child { border-bottom: none; }
   .md-key { color: var(--text-dim); font-size: 10px; letter-spacing: 0.5px; min-width: 70px; }
   .md-val { color: var(--text-bright); font-family: var(--font-display); text-align: right; }
   
   .sensor-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
   .sensor-item { background: var(--bg-deep); border: 1px solid var(--border); padding: 10px; }
   .sensor-label { font-size: 9px; color: var(--text-dim); letter-spacing: 1px; margin-bottom: 2px; }
   .sensor-value { font-family: var(--font-display); font-size: 22px; font-weight: 600; color: var(--phosphor-bright); text-shadow: 0 0 8px var(--phosphor-glow); line-height: 1.2; }
   .sensor-unit { font-size: 10px; color: var(--text-dim); }
   .sensor-bar { margin-top: 6px; height: 3px; background: var(--border); overflow: hidden; }
   .sensor-fill { height: 100%; transition: width 0.5s ease; width: 0%; }
   .alt-fill  { background: var(--cyan); box-shadow: 0 0 4px var(--cyan); }
   .temp-fill { background: var(--amber); box-shadow: 0 0 4px var(--amber); }
   .psi-fill  { background: #cc66ff; box-shadow: 0 0 4px #cc66ff; }
   .batt-fill { background: var(--phosphor); box-shadow: 0 0 4px var(--phosphor); }
   .acc-fill  { background: #5588ff; box-shadow: 0 0 4px #5588ff; }
   
   .charts-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
   .charts-row .panel { margin-bottom: 12px; }
   .chart-container { position: relative; height: 220px; }
   
   .log-panel { background: var(--bg-dark); border-left: 1px solid var(--border); display: flex; flex-direction: column; height: 100vh; }
   .log-header { background: var(--bg-panel-head); border-bottom: 1px solid var(--border); padding: 10px 12px; }
   .log-title { font-family: var(--font-display); font-size: 11px; color: var(--phosphor-dim); letter-spacing: 1px; white-space: pre; }
   .log-controls { display: flex; gap: 4px; margin-top: 8px; }
   .log-filter {
       background: var(--bg-deep); border: 1px solid var(--border);
       color: var(--text-dim); padding: 3px 8px; font-size: 10px;
       font-family: var(--font-mono); cursor: pointer; transition: all 0.15s; letter-spacing: 0.5px;
   }
   .log-filter:hover { border-color: var(--phosphor-dim); color: var(--text); }
   .log-filter.active { background: var(--phosphor-dim); border-color: var(--phosphor-dim); color: var(--bg-deep); font-weight: 600; }
   .log-content { flex: 1; overflow-y: auto; padding: 6px; background: var(--bg-deep); font-family: var(--font-mono); }
   .log-entry { padding: 3px 6px; margin-bottom: 1px; border-left: 2px solid transparent; font-size: 10px; line-height: 1.5; display: flex; gap: 6px; align-items: baseline; }
   .log-entry:hover { background: var(--bg-panel); }
   .log-entry.DEBUG   { border-left-color: var(--text-dim); }
   .log-entry.INFO    { border-left-color: var(--phosphor-dim); }
   .log-entry.WARNING { border-left-color: var(--amber); }
   .log-entry.ERROR   { border-left-color: var(--red); }
   .log-timestamp { color: var(--text-dim); font-size: 9px; min-width: 55px; flex-shrink: 0; }
   .log-level { font-weight: 600; font-size: 9px; min-width: 34px; flex-shrink: 0; }
   .log-level.DEBUG   { color: var(--text-dim); }
   .log-level.INFO    { color: var(--phosphor-dim); }
   .log-level.WARNING { color: var(--amber); }
   .log-level.ERROR   { color: var(--red); }
   .log-message { color: var(--text); word-break: break-word; font-size: 10px; }
   .log-stats { padding: 6px 12px; background: var(--bg-panel-head); border-top: 1px solid var(--border); font-size: 9px; color: var(--text-dim); display: flex; justify-content: space-between; letter-spacing: 0.5px; }
   .log-auto-scroll { color: var(--phosphor-dim); }
   .log-auto-scroll.paused { color: var(--amber-dim); }
   
   .leaflet-container { background: var(--bg-deep) !important; font-family: var(--font-mono) !important; }
   .leaflet-control-zoom a { background: var(--bg-panel) !important; color: var(--phosphor) !important; border: 1px solid var(--border) !important; }
   .leaflet-control-attribution { background: rgba(1,10,1,0.8) !important; color: var(--text-dim) !important; font-size: 8px !important; }
   .leaflet-control-attribution a { color: var(--phosphor-dim) !important; }
   .leaflet-popup-content-wrapper { background: var(--bg-panel) !important; color: var(--text) !important; border: 1px solid var(--border) !important; border-radius: 0 !important; box-shadow: 0 0 10px rgba(51,255,51,0.1) !important; }
   .leaflet-popup-tip { background: var(--bg-panel) !important; }
   
   @media (max-width: 1400px) {
       .charts-row { grid-template-columns: 1fr 1fr; }
   }
   @media (max-width: 1100px) {
       .main-container { grid-template-columns: 1fr; }
       .log-panel { height: 300px; }
       .top-row { grid-template-columns: 1fr; }
   }